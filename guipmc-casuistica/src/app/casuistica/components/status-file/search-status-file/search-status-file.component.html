<app-navbar></app-navbar>
<app-breadcrumb-ux [titulo]="titulo"></app-breadcrumb-ux>


<br>
<br>
<main class="page">
    <div class="container">
        <form class="form-inline" [formGroup]="formGroup">
            <div class="row">
                <p>Ingresa los datos para realizar la búsqueda</p>
            </div>
            <br>
            <div class="row">
                <div class="form-group col-md-4">
                    <h3 style="margin-top:0px;">Desde*</h3>
                    <div class="form-group datepicker-group">
                        <input class="form-control" type="text" id="fechaInicio2" formControlName="date">
                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <h3 style="margin-top:0px;">Hasta*</h3>
                    <div class="form-group datepicker-group">
                        <input class="form-control" type="text" id="fechaFin2" formControlName="date2">
                        <span class="glyphicon glyphicon-calendar" aria-hidden="true"></span>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-4">
                    <h3 style="margin-top:0px;">Estado del archivo</h3>
                    <select class="form-control" formControlName="statusFile" style=" width: 100%;">
                      <option value="-1">
                        Selecciona una opción
                      </option>
                        <option *ngFor="let sts of estadoArchivo" [value]="sts.cveCatalogo">
                            {{ sts.descCatalogo }}
                          </option>
                    </select>
                </div>
                <div class="col-md-4">
                    <h3 style="margin-top:0px;">Delegación</h3>
                    <select [ngClass]="[!formGroup.controls['delegation'].valid? 'form-control-error':'form-control']  " formControlName="delegation" (change)="chargeSubDelegation($event.target.value)" style=" width: 100%;">
                        <option value="-1">
                            Selecciona una opción
                          </option>
                        <option *ngFor="let del of selectDelegacion" [value]="del.clave" >
                            {{ del.descripcion }}
                          </option>
                    </select>
                </div>
                <div class="col-sm-4">
                    <h3 style="margin-top:0px;">Subdelegación</h3>
                    <select [ngClass]="[!formGroup.controls['subDelegation'].valid? 'form-control-error':'form-control']  " formControlName="subDelegation" style=" width: 100%;">
                        <option value="-1">
                            Selecciona una opción
                          </option>
                        <option *ngFor="let subDel of selectSubDelegacion" [value]="subDel.clave">
                            {{ subDel.descripcion }}
                          </option>
                    </select>
                </div>
            </div>
            <br>
            <br>
            <br>
            <div class="row">
                <div class="col-md-5">
                    <div class="form-group col-md-offset-1 col-md-11" style="
            margin-left: 0px;
            padding-left: 0px;
        ">
                        <label class="col-sm-7" for="email">
              <h3>
                * Campos obligatorios
              </h3>
            </label>
                    </div>
                </div>
                <div class="col-md-7 text-right">
                    <button type="button" class="btn btn-default" (click)="clear()">Limpiar</button>
                    <button type="button" class="btn btn-primary" (click)="search()">Buscar</button>

                </div>
            </div>
        </form>

        <div *ngIf="resultStatusFile != null && resultStatusFile.content.length > 0">
            <div class="row">
                <h3>Resultados de búsqueda</h3>
                <hr class="red">
            </div>
            <div class="row table-responsive" style="text-align:center">
                <table class="table table-striped">

                    <tbody>
                        <tr>
                            <th>#</th>
                            <th style="text-align: center">Nombre del archivo</th>
                            <th style="text-align: center">Fecha del proceso</th>
                            <th style="text-align: center">Estado del archivo</th>
                        </tr>
                        <tr *ngFor=" let resuT of resultStatusFile.content |paginate: config; let i = index">
                            <td>{{resuT.numRegistro}}</td>
                            <td style="display:none">{{resuT.objectIdArchivo}}</td>
                            <td style="text-align: center">{{resuT.nomArchivo}}</td>
                            <td style="text-align: center">{{resuT.fecProcesoCarga | date:'dd/MM/yyyy'}}</td>
                            <td style="text-align: center">{{resuT.desEstadoArchivo}}</td>
                        </tr>

                    </tbody>
                </table>
                <!-- <ngb-pagination [(page)]="page" [pageSize]="resultStatusFile.size" [collectionSize]="resultStatusFile.totalElements" (pageChange)="search()">
                    <ng-template ngbPaginationFirst>Inicio</ng-template>
                    <ng-template ngbPaginationLast>Fin</ng-template>
                    <ng-template ngbPaginationPrevious>Ant.</ng-template>
                    <ng-template ngbPaginationNext>Sig.</ng-template>
                    <ng-template ngbPaginationEllipsis>...</ng-template>
                    <ng-template ngbPaginationNumber let-page>{{ page }}</ng-template>
                </ngb-pagination> -->

                <pagination-controls [maxSize]="maxSize" [directionLinks]="directionLinks" [autoHide]="autoHide" [responsive]="responsive" [previousLabel]="labels.previousLabel" [nextLabel]="labels.nextLabel" [screenReaderPageLabel]="labels.screenReaderPageLabel" [screenReaderCurrentLabel]="labels.screenReaderCurrentLabel"
                    (pageChange)="pageChanged($event)">
                </pagination-controls>

            </div>
        </div>

        <div class="modal fade" id="dialogMessage">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">{{titDialogo}}</h4>
                    </div>
                    <div class="modal-body">
                        <p>{{messDialogo}}</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" (click)="hideMessage()">Regresar</button>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <br>
    <br>

    <br>
</main>
<ngx-spinner></ngx-spinner>
